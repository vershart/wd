@using Sludinajumi.Api.Models;
@model Sludinajumi.Manage.Models.ManagePropertyTranslationsViewModel;
@{
    ViewData["Title"] = $"Īpašības [{Model.Property.Name.NeutralValue}] tulkojumi";
}
<div class="w3-container w3-section">
    <h2>Par īpašību tulkošanu</h2>
    <p>
        Viena no šī servisa galvenajiem uzdevumiem ir vietņu elementu parādīšana dažādās valodās.
        Tulkotas īpašības palīdz lietotājam daudz precīzāk aizpildīt sludinājuma iesniegšanas veidlapu.
    </p>
    <h3>Tulkojumi</h3>
    <table class="w3-table w3-table-all">
        <thead>
            <tr>
                <th style="width: 25%; text-align: left" colspan="2">Valoda</th>
                <th style="width: 20%;">Nosaukums</th>
                <th style="width: 40%">Apraksts</th>
                <th style="width: 15%; text-align: center;">Darbības</th>
            </tr>
        </thead>
        <tbody>
        @foreach (Language lang in @Model.AvailableLanguages)
        {
            <tr>
                <td>@lang.NormalizedNeutralSelfName</td>
                <td>[@lang.NormalizedSelfName]</td>
                @{Translation translation = null;}
                @foreach (Translation t in @Model.Property.Name.Translations)
                {
                    @if (t.Language.Code == lang.Code)
                    {
                        translation = t;
                    }
                }
                @if (translation == null || translation.Value == null || translation.Value == "") {
                    <td>
                        <span title="Īpašība nav tulkota">
                            <i class="fa fa-exclamation-triangle w3-text-yellow"></i>
                            <i>[Nav tulkots]</i>
                        </span>
                    </td>
                }
                else {
                    <td>@translation.Value</td>
                }
                @foreach (Translation t in @Model.Property.Description.Translations)
                {
                    @if (t.Language.Code == lang.Code)
                    {
                        translation = t;
                    }
                }
                @if (translation == null || translation.Value == null || translation.Value == "") {
                    <td>
                        <span title="Īpašība nav tulkota">
                            <i class="fa fa-exclamation-triangle w3-text-yellow"></i>
                            <i>[Nav tulkots]</i>
                        </span>
                    </td>
                    <td style="text-align: center;">
                        <a asp-action="TranslateProperty"
                            asp-route-PropertyId="@Model.Property.Id"
                            asp-route-LanguageId="@lang.Code"
                            class="w3-text-indigo">
                            <i class="fa fa-arrow-circle-right"></i>
                            Tulkot
                        </a>
                    </td>
                }
                else {
                    <td>@translation.Value</td>
                    <td style="text-align: center;">
                        <a asp-action="TranslateProperty"
                            asp-route-PropertyId="@Model.Property.Id"
                            asp-route-LanguageId="@lang.Code"
                            class="w3-text-indigo">
                            <i class="fa fa-pencil"></i>
                            Rediģēt
                        </a>
                    </td>
                }
            </tr>

        }       
        </tbody>
    </table>
</div>